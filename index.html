<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AI-Powered Career Guide</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f8f9fa; }
        .container { max-width: 600px; margin-top: 50px; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
        .chatbox { border: 1px solid #ddd; padding: 10px; min-height: 200px; text-align: left; overflow-y: auto; background: #f1f1f1; border-radius: 5px; }
    </style>
</head>
<body>

    <div class="container">
        <h2 class="text-center">AI-Powered Career Guide</h2>
        
        <div class="mb-3">
            <label class="form-label">Your Name</label>
            <input type="text" id="name" class="form-control" placeholder="Enter your name" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Your Skills</label>
            <input type="text" id="skills" class="form-control" placeholder="E.g., Python, Web Development">
        </div>
        <div class="mb-3">
            <label class="form-label">Your Interests</label>
            <input type="text" id="interests" class="form-control" placeholder="E.g., AI, Marketing">
        </div>
        
        <button class="btn btn-primary w-100" onclick="getCareerAdvice()">Get Career Advice</button>

        <h3 class="mt-4">AI Chatbot</h3>
        <div class="chatbox p-2" id="chatbox"></div>

        <h3 class="mt-4">Job Recommendations</h3>
        <div class="list-group" id="job-list"></div>

        <input type="text" id="followUp" class="form-control mt-3" placeholder="Ask a follow-up question">
        <button class="btn btn-secondary w-100 mt-2" onclick="askFollowUp()">Ask AI</button>
    </div>

    <script>
        // Replace these with your actual hosted PHP URLs
        const BACKEND_URL = "http://career-guide.free.nf.infinityfreeapp.com/backend.php";
        const FOLLOWUP_URL = "http://career-guide.free.nf.infinityfreeapp.com/followup.php";
        const LINKEDIN_URL = "http://career-guide.free.nf.infinityfreeapp.com/linkedin.php";

        function getCareerAdvice() {
            let name = document.getElementById("name").value;
            let skills = document.getElementById("skills").value;
            let interests = document.getElementById("interests").value;

            if (name === "" || skills === "" || interests === "") {
                alert("Please fill all fields.");
                return;
            }

            let chatbox = document.getElementById("chatbox");
            chatbox.innerHTML += `<p><strong>You:</strong> My skills: ${skills}, Interests: ${interests}</p>`;

            fetch(BACKEND_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `skills=${skills}&interests=${interests}`
            })
            .then(response => response.json())
            .then(data => {
                chatbox.innerHTML += `<p><strong>AI:</strong> ${data.career_advice}</p>`;
                chatbox.innerHTML += `<p><strong>AI:</strong> Do you have any follow-up questions?</p>`;
                loadLinkedInJobs(skills);
            })
            .catch(error => console.error('Error:', error));
        }

        function askFollowUp() {
            let followUp = document.getElementById("followUp").value;
            if (followUp.trim() === "") {
                alert("Enter a question.");
                return;
            }

            let chatbox = document.getElementById("chatbox");
            chatbox.innerHTML += `<p><strong>You:</strong> ${followUp}</p>`;

            fetch(FOLLOWUP_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `question=${followUp}`
            })
            .then(response => response.json())
            .then(data => {
                chatbox.innerHTML += `<p><strong>AI:</strong> ${data.response}</p>`;
            })
            .catch(error => console.error('Error:', error));
        }

        function loadLinkedInJobs(skills) {
            let jobList = document.getElementById("job-list");
            jobList.innerHTML = "<p>Fetching job recommendations...</p>";

            fetch(`${LINKEDIN_URL}?skills=${skills}`)
            .then(response => response.json())
            .then(data => {
                jobList.innerHTML = "";
                data.jobs.forEach(job => {
                    jobList.innerHTML += `<a href="${job.url}" class="list-group-item list-group-item-action" target="_blank">${job.title} - ${job.company}</a>`;
                });
            })
            .catch(error => console.error('Error:', error));
        }
    </script>

</body>
</html>
